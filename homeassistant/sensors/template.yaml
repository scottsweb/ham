platform: template
sensors:

  placeholder:
    value_template: " "

  day:
    icon_template: mdi:calendar
    value_template: >
      {% set weekday = as_local(states.sensor.date.last_changed).strftime('%w') | int %}
      {% set days = ['Måndag', 'Tisdag', 'Onsdag', 'Torsdag', 'Fredag', 'Lördag', 'Söndag'] %}
      {{ days[weekday - 1] }}

  date_se:
    icon_template: mdi:calendar
    value_template: >
      {% set month = as_local(states.sensor.date.last_changed).strftime('%m') | int %}
      {% set day = as_local(states.sensor.date.last_changed).strftime('%d') | int %}
      {% set months = ['Januari', 'Februari', 'Mars', 'April', 'Maj', 'Juni',
      'Juli', 'Augusti', 'September', 'Oktober', 'November', 'December'] %}
      {{ day }} {{ months[month - 1] }}

  # vacuum
  monk_filter:
    friendly_name: Filter
    unit_of_measurement: '%'
    value_template: "{{ (states('sensor.xiaomi_vacuum_cleaner_filter_left') | int(default=0) / 5400) | int(default=0) }}"
    icon_template: 'mdi:air-filter'

  monk_brush:
    friendly_name: Brush
    unit_of_measurement: '%'
    value_template: "{{ (states('sensor.xiaomi_vacuum_cleaner_main_brush_left') | int(default=0) / 10800) | int(default=0) }}"
    icon_template: 'mdi:broom'

  monk_sensors:
    friendly_name: Sensors
    unit_of_measurement: '%'
    value_template: "{{ (states('sensor.xiaomi_vacuum_cleaner_sensor_dirty_left') | int(default=0) / 1080) | int(default=0) }}"
    icon_template: 'mdi:leak'

  monk_side_brush:
    friendly_name: Side Brush
    unit_of_measurement: '%'
    value_template: "{{ (states('sensor.xiaomi_vacuum_cleaner_side_brush_left') | int(default=0) / 7200) | int(default=0) }}"
    icon_template: 'mdi:brush'

  # hass
  hass_version_template:
    icon_template: 'mdi:home-assistant'
    friendly_name: Version
    value_template: >-
      {% if states('sensor.hass_version_installed') == states('sensor.hass_version_latest') %}
        {{ states('sensor.hass_version_installed') }}
      {% else %}
        {{ states('sensor.hass_version_installed') }} < {{ states('sensor.hass_version_latest') }}
      {% endif %}

  # media
  media_luther_title_truncate:
    value_template: >
      {% if states('media_player.luther_universal_tv') == null %} {% else %}
        {% if is_state_attr('media_player.luther_universal_tv', 'media_title', 'Nothing playing') %} Inget spelas
        {% elif is_state_attr('media_player.luther_universal_tv', 'media_title', 'No title') %} Ingen titel
        {% elif is_state('media_player.luther_universal_tv', 'idle') %} Viloläge
        {% elif state_attr('media_player.luther_universal_tv', 'media_title') != None %} {{ state_attr('media_player.luther_universal_tv', 'media_title') | truncate(30, True, '...', 0) }}
        {% else %} {{ state_attr('media_player.luther_universal_tv', 'app_name') }}
        {% endif %}
      {% endif %}
